{
  "db": "PostgreSQL",
  "029ce8ddc91ee973f9b3306c6756b0b9e328949364b42f08bad6233c7a202c8b": {
    "describe": {
      "columns": [
        {
          "name": "rank",
          "ordinal": 0,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT rank\n                FROM room_members\n                WHERE room_id = $1 AND member_id = $2\n            "
  },
  "12c4c9a2bd4ef59235e99e575eed2aa7a53915668af9eb8bcfc2a44a736c1808": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                INSERT INTO room_members (room_id, member_id)\n                VALUES ($1, $2)\n            "
  },
  "1e86724d47df0419bd32d570ce6c65edacc4b0bfe7258f7529c2e45e0f82ac9e": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "username",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "nickname",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "bio",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "role",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "deleted",
          "ordinal": 6,
          "type_info": "Bool"
        },
        {
          "name": "create_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        },
        {
          "name": "total",
          "ordinal": 8,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        null
      ],
      "parameters": {
        "Left": [
          "Bool",
          "Text",
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT id, username, nickname, avatar, bio, role,\n                    deleted, create_at, count(*) OVER() AS total\n                FROM users\n                WHERE $1 OR username LIKE $2\n                ORDER BY create_at ASC\n                LIMIT $3\n                OFFSET $4\n            "
  },
  "28bddeb7c24dc09a61ccad2bf227ae0589a4ccc09fc02cd2681012ce43769cd6": {
    "describe": {
      "columns": [
        {
          "name": "user_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "friend_id",
          "ordinal": 1,
          "type_info": "Int8"
        },
        {
          "name": "room_id",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "status",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT user_id, friend_id, room_id, status, create_at\n                FROM friendships\n                WHERE (user_id = $1 AND friend_id = $2)\n                    OR (user_id = $2 AND friend_id = $1)\n            "
  },
  "2b61b4ccc3c9c859425ef4cce0b2d66d5d303df05dd9a0af8f2b04e0a22e10e4": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "cover",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "category",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Varchar"
        ]
      }
    },
    "query": "\n                INSERT INTO rooms (name, cover)\n                VALUES ($1, '/cover/public')\n                RETURNING id, name, cover, category, create_at\n            "
  },
  "315a6dec7255a68a8492ef75f6f1457a9281d1c376185ca15f749d13da6a51c5": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "room_id",
          "ordinal": 1,
          "type_info": "Int8"
        },
        {
          "name": "sender_id",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "content",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "kind",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "send_at",
          "ordinal": 5,
          "type_info": "Timestamptz"
        },
        {
          "name": "sender_name",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "sender_avatar",
          "ordinal": 7,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8",
          "Varchar",
          "Varchar"
        ]
      }
    },
    "query": "\n                WITH insert_cte AS (\n                    INSERT INTO messages (room_id, sender_id, content, kind)\n                    VALUES ($1, $2, $3, $4)\n                    RETURNING id, room_id, sender_id, content, kind, send_at\n                )\n                SELECT ic.id, ic.room_id, sender_id, content, kind, ic.send_at,\n                    nickname AS sender_name, avatar AS sender_avatar\n                FROM insert_cte AS ic\n                INNER JOIN users AS u ON ic.sender_id = u.id\n            "
  },
  "3446fb55e3ff1aa7b000f01c9b6e11c3b8f68df26de8f05ec4660d72d970aef7": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8",
          "Varchar",
          "Varchar",
          "Varchar",
          "Timestamptz"
        ]
      }
    },
    "query": "\n                INSERT INTO sessions (\n                    id, user_id, refresh_token, client_ip, user_agent, expire_at\n                )\n                VALUES ($1, $2, $3, $4, $5, $6)\n            "
  },
  "400496fced7f2f722579f86d5a69300b78f43cba519bbbd1c5abc5af6c2fedcb": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "username",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "nickname",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "bio",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "role",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "deleted",
          "ordinal": 6,
          "type_info": "Bool"
        },
        {
          "name": "create_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Varchar",
          "Varchar",
          "Varchar",
          "Varchar",
          "Varchar",
          "Bool",
          "Int8"
        ]
      }
    },
    "query": "\n                UPDATE users\n                SET\n                    username = coalesce($1, username),\n                    hashed_password = coalesce($2, hashed_password),\n                    nickname = coalesce($3, nickname),\n                    avatar = coalesce($4, avatar),\n                    bio = coalesce($5, bio),\n                    role = coalesce($6, role),\n                    deleted = coalesce($7, deleted)\n                WHERE id = $8\n                RETURNING id, username, nickname, avatar, bio, role,\n                    deleted, create_at\n            "
  },
  "42ae239161e26ae6fbbf848d812ad54e9f7e6310fea8e2db2a1854aaccf4eb76": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\n                INSERT INTO rooms (name, category)\n                VALUES ('Friend', 'private')\n                RETURNING id\n            "
  },
  "434974ca28a762c9dddb2f233959911a24bec1749a8a20f61194534c6c82e02d": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int8Array"
        ]
      }
    },
    "query": "\n                DELETE FROM rooms\n                WHERE id IN (\n                    SELECT room_id\n                    FROM users\n                    WHERE id = ANY($1::bigint[])\n                )\n            "
  },
  "4c619119386d980b333b761499dfc0c12bc347b1c6b753131e85201cb4d33637": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "username",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "nickname",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "bio",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "role",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "deleted",
          "ordinal": 6,
          "type_info": "Bool"
        },
        {
          "name": "create_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Varchar",
          "Varchar",
          "Varchar",
          "Int8"
        ]
      }
    },
    "query": "\n                INSERT INTO users (username, hashed_password, nickname, role, room_id, avatar)\n                VALUES ($1, $2, $3, $4, $5, '/avatar/default')\n                RETURNING id, username, nickname, avatar, bio, role,\n                    deleted, create_at\n            "
  },
  "4ce0fae2aadf8900349e6e7855ac03667d46071689dc71d42512b4e2a87d2378": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "UuidArray"
        ]
      }
    },
    "query": "\n                DELETE FROM sessions\n                WHERE id = ANY($1::uuid[])\n            "
  },
  "4d1b9b0639d0ce29e10438d66344ba094dd119ffc18e0a7b8c246bd6688b1026": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": []
      }
    },
    "query": "\n                INSERT INTO rooms (name, cover, category)\n                VALUES ('My device', '/cover/personal', 'personal')\n                RETURNING id\n            "
  },
  "4db666835b686cb2c88e7e5763f49bc6173cab122dc15d1501df57671827eeb0": {
    "describe": {
      "columns": [
        {
          "name": "avatar",
          "ordinal": 0,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Int8"
        ]
      }
    },
    "query": "\n                UPDATE users AS x\n                SET avatar = $1\n                FROM (SELECT id, avatar FROM users where id = $2 FOR UPDATE) AS y\n                WHERE x.id = y.id\n                RETURNING y.avatar\n            "
  },
  "4e234330bec45e7ac907530478d424102e27dae195fdcd9e17e23b4c316e864e": {
    "describe": {
      "columns": [
        {
          "name": "hashed_password",
          "ordinal": 0,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT hashed_password\n                FROM users WHERE id = $1\n            "
  },
  "5aec9cd49ec4484e9fc952e7464d54e5543943b2e9cd4cf33be5e0b5823b693c": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Varchar",
          "Varchar",
          "Timestamptz",
          "Int8",
          "Text"
        ]
      }
    },
    "query": "\n                UPDATE sessions\n                SET\n                    id = $1,\n                    refresh_token = $2,\n                    client_ip = $3,\n                    expire_at = $4,\n                    create_at = now()\n                WHERE user_id = $5 AND user_agent = $6\n            "
  },
  "5c910fd3bf9e2bccebc96b3a45e5fae0b1b6ee3cef706977f8e1e0fb1c0eb8eb": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "rank",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "join_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT u.id, u.nickname AS name, u.avatar, y.rank, y.join_at\n                FROM room_members AS y\n                INNER JOIN users AS u ON y.member_id = u.id\n                WHERE y.room_id = $1\n            "
  },
  "69aa0977feba88eed4b1442048111493a4cdc4e1a74e2b879c2f73af8fc09518": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "rank",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "join_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8Array"
        ]
      }
    },
    "query": "\n                SELECT id, nickname AS name, avatar, rank, y.join_at\n                FROM room_members y\n                INNER JOIN users u ON y.member_id = u.id\n                WHERE y.room_id = $1 AND y.member_id = ANY($2::bigint[])\n            "
  },
  "6ec5801fdc11eefc0674bc23f998d7e89c5a9daddefde64c14509fd5ab197ecb": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "username",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "nickname",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "bio",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "role",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "deleted",
          "ordinal": 6,
          "type_info": "Bool"
        },
        {
          "name": "create_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT id, username, nickname, avatar, bio, role,\n                    deleted, create_at\n                FROM users\n                WHERE id = $1\n            "
  },
  "736d0deac32befa857af10359d4b4c0c4971627c45d7f30001e36392d54b44b2": {
    "describe": {
      "columns": [
        {
          "name": "member_id",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8Array",
          "Int8Array"
        ]
      }
    },
    "query": "\n                INSERT INTO room_members (room_id, member_id)\n                SELECT * FROM UNNEST($1::bigint[], $2::bigint[])\n                ON CONFLICT (room_id, member_id) DO NOTHING\n                RETURNING member_id\n            "
  },
  "7d0103eb9bd283cbf8867955ecfd130bf5a068e1633269e87808f9dec819c466": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "cover",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "category",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "member_id",
          "ordinal": 5,
          "type_info": "Int8"
        },
        {
          "name": "rank",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "join_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        },
        {
          "name": "nickname",
          "ordinal": 8,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 9,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                WITH rooms_cte AS (\n                    SELECT id AS room_id, name, cover, category, create_at\n                    FROM rooms WHERE id IN (\n                        SELECT room_id FROM room_members\n                        WHERE member_id = $1)\n                )\n                SELECT room_id, name, cover, category, create_at,\n                    member_id, rank, join_at, nickname, avatar\n                FROM rooms_cte AS r,\n                    LATERAL (\n                        SELECT member_id, rank, join_at, nickname, avatar\n                        FROM room_members AS y\n                        INNER JOIN users AS u ON y.member_id = u.id\n                        WHERE y.room_id = r.room_id\n                    ) AS m\n            "
  },
  "83283bef0c7981e872135f1038f533746c046804cef6e7f43a89c232ccecb0c0": {
    "describe": {
      "columns": [
        {
          "name": "member_id",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8Array"
        ]
      }
    },
    "query": "\n                DELETE FROM room_members\n                WHERE room_id = $1 AND member_id = ANY($2::bigint[]) AND rank <> 'owner'\n                RETURNING member_id\n            "
  },
  "8d80d80ac2fd98483fe1cdc8b22f9ac546911a3f0e4ffbe4847e73e597a371d6": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Varchar",
          "Int8"
        ]
      }
    },
    "query": "\n                UPDATE users\n                SET hashed_password = $1\n                WHERE id = $2\n            "
  },
  "8ed368e5b1344e3c12453caa536b4d09029d86ddaadff0bca2b744acf96290a6": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "status",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "id",
          "ordinal": 3,
          "type_info": "Int8"
        },
        {
          "name": "username",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "nickname",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "bio",
          "ordinal": 7,
          "type_info": "Varchar"
        },
        {
          "name": "first",
          "ordinal": 8,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        null
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT f.room_id, f.status, f.create_at, u.id, u.username, u.nickname,\n                    u.avatar, u.bio, (f.user_id = $1) AS first\n                FROM friendships AS f\n                INNER JOIN users AS u ON u.id = f.user_id\n                WHERE f.friend_id = $1 AND status IN ('adding', 'accepted')\n            "
  },
  "9366672c4ea9f26310ebaa989451d89526c87afeb9fec37aaaad0b5a4a9c49ac": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int8",
          "Int8Array"
        ]
      }
    },
    "query": "\n                DELETE FROM room_members\n                WHERE room_id = $1 AND member_id = ANY($2::bigint[])\n            "
  },
  "9be085b714525ebc865db0b37dca55da2af0d50d77cb8adc1fd67af3f161a64b": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "cover",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "category",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT id, name, cover, category, create_at\n                FROM rooms\n                WHERE id = $1\n            "
  },
  "ae71641ca0b26a46c84831f148e5f2029c97c98a89ab5dfa055dcac8e1a1452b": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "status",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "user_id",
          "ordinal": 3,
          "type_info": "Int8"
        },
        {
          "name": "u_username",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "u_nickname",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "u_avatar",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "u_bio",
          "ordinal": 7,
          "type_info": "Varchar"
        },
        {
          "name": "friend_id",
          "ordinal": 8,
          "type_info": "Int8"
        },
        {
          "name": "f_username",
          "ordinal": 9,
          "type_info": "Varchar"
        },
        {
          "name": "f_nickname",
          "ordinal": 10,
          "type_info": "Varchar"
        },
        {
          "name": "f_avatar",
          "ordinal": 11,
          "type_info": "Varchar"
        },
        {
          "name": "f_bio",
          "ordinal": 12,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                WITH insert_cte AS (\n                    INSERT INTO friendships (user_id, friend_id, room_id)\n                    VALUES ($1, $2, $3)\n                    RETURNING user_id, friend_id, room_id, status, create_at\n                )\n                SELECT ic.room_id, status, ic.create_at, user_id, u1.username AS u_username,\n                    u1.nickname AS u_nickname, u1.avatar AS u_avatar, u1.bio AS u_bio,\n                    friend_id, u2.username AS f_username, u2.nickname AS f_nickname,\n                    u2.avatar AS f_avatar, u2.bio AS f_bio\n                FROM insert_cte AS ic\n                INNER JOIN users AS u1 ON u1.id = ic.user_id\n                INNER JOIN users AS u2 ON u2.id = ic.friend_id\n            "
  },
  "b1e53389abac546dc5bd07dc9d2ba0b23290bb028f51d26a07c3f93e1c119308": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "rank",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "join_at",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "category",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        },
        {
          "name": "member_id",
          "ordinal": 5,
          "type_info": "Int8"
        },
        {
          "name": "nickname",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 7,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8",
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                WITH insert_cte AS (\n                    INSERT INTO room_members (room_id, member_id)\n                    VALUES ($1, $2), ($3, $4)\n                    ON CONFLICT (room_id, member_id) DO NOTHING\n                    RETURNING room_id, member_id, rank, join_at\n                )\n                SELECT ic.room_id, ic.rank, ic.join_at, r.category,\n                    r.create_at, ic.member_id, u.nickname, u.avatar\n                FROM insert_cte AS ic\n                INNER JOIN rooms AS r ON r.id = ic.room_id\n                INNER JOIN users AS u ON u.id = ic.member_id\n            "
  },
  "b588953a3845729ed58f95b1bf58035b72892cf4230288db366a87a3a4d39bae": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Uuid"
        },
        {
          "name": "user_id",
          "ordinal": 1,
          "type_info": "Int8"
        },
        {
          "name": "refresh_token",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "client_ip",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "user_agent",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "expire_at",
          "ordinal": 5,
          "type_info": "Timestamptz"
        },
        {
          "name": "create_at",
          "ordinal": 6,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Uuid"
        ]
      }
    },
    "query": "\n                SELECT id, user_id, refresh_token, client_ip,\n                    user_agent, expire_at, create_at\n                FROM sessions WHERE id = $1\n            "
  },
  "b7cad823ef93b5050376b2263fab8581769e76d43cb40f6c355b9ea0013debf5": {
    "describe": {
      "columns": [
        {
          "name": "member_id",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT member_id\n                FROM room_members\n                WHERE room_id = $1\n            "
  },
  "b89f58ce1d498931970169812b22c372a4d865a04d1fea335f940b9f5417fd0e": {
    "describe": {
      "columns": [
        {
          "name": "user_id",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                UPDATE friendships\n                SET status = 'deleted'\n                WHERE user_id = $1 AND friend_id = $2 AND status = 'adding'\n                RETURNING user_id\n            "
  },
  "b9168532ab88726efb3fe41c0374945d758adb0ff3ce8ebff2cad987ac9b58bd": {
    "describe": {
      "columns": [
        {
          "name": "code",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "expire_at",
          "ordinal": 1,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n                SELECT code, expire_at\n                FROM invitations\n                WHERE code = $1\n            "
  },
  "bf1954ae032de3599aa9908f49cbb9004821b62c41912abc64a882b59eceeddf": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "username",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "hashed_password",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "nickname",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "bio",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "role",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "deleted",
          "ordinal": 7,
          "type_info": "Bool"
        },
        {
          "name": "room_id",
          "ordinal": 8,
          "type_info": "Int8"
        },
        {
          "name": "create_at",
          "ordinal": 9,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Text"
        ]
      }
    },
    "query": "\n                SELECT id, username, hashed_password, nickname, avatar,\n                    bio, role, deleted, room_id, create_at\n                FROM users\n                WHERE username = $1\n            "
  },
  "bf1abc62be1dd3606034df571701b0a4732fee24785a759ba2586b7f2a0bf471": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "message_id",
          "ordinal": 1,
          "type_info": "Int8"
        },
        {
          "name": "sender_id",
          "ordinal": 2,
          "type_info": "Int8"
        },
        {
          "name": "sender_nickname",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "sender_avatar",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "content",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "kind",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "send_at",
          "ordinal": 7,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT room_id, message_id, sender_id, sender_nickname,\n                    sender_avatar, content, kind, send_at\n                FROM (\n                    SELECT room_id, join_at\n                    FROM room_members\n                    WHERE member_id = $1\n                ) AS r,\n                    LATERAL (\n                        SELECT m.id AS message_id, sender_id, u.nickname AS sender_nickname,\n                            u.avatar AS sender_avatar, content, kind, m.send_at\n                        FROM messages AS m\n                        INNER JOIN users AS u ON u.id = m.sender_id\n                        WHERE m.room_id = r.room_id AND m.send_at > r.join_at\n                        ORDER BY m.send_at DESC\n                        LIMIT 16\n                    ) AS m\n                ORDER BY r.room_id, m.send_at\n            "
  },
  "c3b6be0cf073ee7a976e1b816ab99734f2cf8193dd6d072820b9aaac8dd80228": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "status",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "user_id",
          "ordinal": 3,
          "type_info": "Int8"
        },
        {
          "name": "u_username",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "u_nickname",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "u_avatar",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "u_bio",
          "ordinal": 7,
          "type_info": "Varchar"
        },
        {
          "name": "friend_id",
          "ordinal": 8,
          "type_info": "Int8"
        },
        {
          "name": "f_username",
          "ordinal": 9,
          "type_info": "Varchar"
        },
        {
          "name": "f_nickname",
          "ordinal": 10,
          "type_info": "Varchar"
        },
        {
          "name": "f_avatar",
          "ordinal": 11,
          "type_info": "Varchar"
        },
        {
          "name": "f_bio",
          "ordinal": 12,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                WITH update_cte AS (\n                    UPDATE friendships\n                    SET user_id = $1,\n                        friend_id = $2,\n                        status = 'adding'\n                    WHERE (user_id = $1 AND friend_id = $2 AND status = 'deleted')\n                        OR (user_id = $2 AND friend_id = $1 AND status = 'deleted')\n                    RETURNING user_id, friend_id, room_id, status, create_at\n                )\n                SELECT uc.room_id, status, uc.create_at, user_id, u1.username AS u_username,\n                    u1.nickname AS u_nickname, u1.avatar AS u_avatar, u1.bio AS u_bio,\n                    friend_id, u2.username AS f_username, u2.nickname AS f_nickname,\n                    u2.avatar AS f_avatar, u2.bio AS f_bio\n                FROM update_cte AS uc\n                INNER JOIN users AS u1 ON u1.id = uc.user_id\n                INNER JOIN users AS u2 ON u2.id = uc.friend_id\n            "
  },
  "c86225ed91807f9272a202c2825adfecd6c4331ea21877cffe7af7b5ddc1c356": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "status",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "id",
          "ordinal": 3,
          "type_info": "Int8"
        },
        {
          "name": "username",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "nickname",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "bio",
          "ordinal": 7,
          "type_info": "Varchar"
        },
        {
          "name": "first",
          "ordinal": 8,
          "type_info": "Bool"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        null
      ],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT f.room_id, f.status, f.create_at, u.id, u.username, u.nickname,\n                    u.avatar, u.bio, (f.user_id = $1) AS first\n                FROM friendships AS f\n                INNER JOIN users AS u ON u.id = f.friend_id\n                WHERE user_id = $1 AND status IN ('adding', 'accepted')\n            "
  },
  "cd4f307fe56841c6385a0fc4acec6e2c8ef305f7cb04089cbaded840b16e689a": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Int8"
        ]
      }
    },
    "query": "\n                UPDATE rooms\n                SET name = $1\n                WHERE id = $2\n                RETURNING id AS room_id, name\n            "
  },
  "dca7e2cc69ff2611f68bc4b11b242df44baaa6e73dc17dc4137e363868baef51": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Int8"
        ]
      }
    },
    "query": "\n                DELETE FROM rooms\n                WHERE id = $1\n            "
  },
  "e30d7031612a91744c32463481f1b62f92af7650b7b311de7c2e87bc6dbd0280": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "status",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "create_at",
          "ordinal": 2,
          "type_info": "Timestamptz"
        },
        {
          "name": "user_id",
          "ordinal": 3,
          "type_info": "Int8"
        },
        {
          "name": "u_username",
          "ordinal": 4,
          "type_info": "Varchar"
        },
        {
          "name": "u_nickname",
          "ordinal": 5,
          "type_info": "Varchar"
        },
        {
          "name": "u_avatar",
          "ordinal": 6,
          "type_info": "Varchar"
        },
        {
          "name": "u_bio",
          "ordinal": 7,
          "type_info": "Varchar"
        },
        {
          "name": "friend_id",
          "ordinal": 8,
          "type_info": "Int8"
        },
        {
          "name": "f_username",
          "ordinal": 9,
          "type_info": "Varchar"
        },
        {
          "name": "f_nickname",
          "ordinal": 10,
          "type_info": "Varchar"
        },
        {
          "name": "f_avatar",
          "ordinal": 11,
          "type_info": "Varchar"
        },
        {
          "name": "f_bio",
          "ordinal": 12,
          "type_info": "Varchar"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                WITH update_cte AS (\n                    UPDATE friendships\n                    SET status = 'accepted'\n                    WHERE user_id = $1 AND friend_id = $2 AND status = 'adding'\n                    RETURNING user_id, friend_id, room_id, status, create_at\n                )\n                SELECT uc.room_id, status, uc.create_at, user_id, u1.username AS u_username,\n                    u1.nickname AS u_nickname, u1.avatar AS u_avatar, u1.bio AS u_bio,\n                    friend_id, u2.username AS f_username, u2.nickname AS f_nickname,\n                    u2.avatar AS f_avatar, u2.bio AS f_bio\n                FROM update_cte AS uc\n                INNER JOIN users AS u1 ON u1.id = uc.user_id\n                INNER JOIN users AS u2 ON u2.id = uc.friend_id\n            "
  },
  "ed7d2fc2b0af753737d729020fcde41190a7b9165f254b28315d6861f9df1ab6": {
    "describe": {
      "columns": [
        {
          "name": "code",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "expire_at",
          "ordinal": 1,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Varchar",
          "Timestamptz"
        ]
      }
    },
    "query": "\n                INSERT INTO invitations (code, expire_at)\n                VALUES ($1, $2)\n                ON CONFLICT (code)\n                DO UPDATE SET expire_at = $2\n                RETURNING code, expire_at\n            "
  },
  "ee7a6795fa7d08b58208ff9bb66684de297b37fdd3487298063d1bf05d4f703f": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "VarcharArray"
        ]
      }
    },
    "query": "\n                DELETE FROM invitations\n                WHERE code = ANY($1::varchar[])\n            "
  },
  "f19b59658c9b620c0c127deac1b8df879a38caf1e7f5ffba468f387cfdb8ab99": {
    "describe": {
      "columns": [
        {
          "name": "code",
          "ordinal": 0,
          "type_info": "Varchar"
        },
        {
          "name": "expire_at",
          "ordinal": 1,
          "type_info": "Timestamptz"
        },
        {
          "name": "total",
          "ordinal": 2,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false,
        false,
        null
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                SELECT code, expire_at, count(*) OVER() AS total\n                FROM invitations\n                LIMIT $1\n                OFFSET $2\n            "
  },
  "f2d49ccae9349782e70c2ebc1f14bb7a2cb6afdbd41f383b0ffff9a78f4acc8b": {
    "describe": {
      "columns": [
        {
          "name": "room_id",
          "ordinal": 0,
          "type_info": "Int8"
        }
      ],
      "nullable": [
        false
      ],
      "parameters": {
        "Left": [
          "Int8",
          "Int8"
        ]
      }
    },
    "query": "\n                UPDATE friendships\n                SET status = 'deleted'\n                WHERE (user_id = $1 AND friend_id = $2 AND status = 'accepted')\n                    OR (user_id = $2 AND friend_id = $1 AND status = 'accepted')\n                RETURNING room_id\n        "
  },
  "f32f5117970b1ef30f5ea0bfb27f17472394b51d7bc935e1d1dd12d7b7c4933e": {
    "describe": {
      "columns": [],
      "nullable": [],
      "parameters": {
        "Left": [
          "Uuid",
          "Int8"
        ]
      }
    },
    "query": "\n                DELETE FROM sessions\n                WHERE id = $1 AND user_id = $2\n            "
  },
  "f8e5dc8d811b742caaa8c264724e046f66f6bbbd2dd52d8161bd67e06365030d": {
    "describe": {
      "columns": [
        {
          "name": "id",
          "ordinal": 0,
          "type_info": "Int8"
        },
        {
          "name": "name",
          "ordinal": 1,
          "type_info": "Varchar"
        },
        {
          "name": "avatar",
          "ordinal": 2,
          "type_info": "Varchar"
        },
        {
          "name": "rank",
          "ordinal": 3,
          "type_info": "Varchar"
        },
        {
          "name": "join_at",
          "ordinal": 4,
          "type_info": "Timestamptz"
        }
      ],
      "nullable": [
        false,
        false,
        false,
        false,
        false
      ],
      "parameters": {
        "Left": [
          "Int8Array",
          "Int8Array",
          "VarcharArray"
        ]
      }
    },
    "query": "\n                WITH insert_cte AS (\n                    INSERT INTO room_members (room_id, member_id, rank)\n                    SELECT * FROM UNNEST($1::bigint[], $2::bigint[], $3::varchar[])\n                    RETURNING member_id, rank, join_at\n                )\n                SELECT u.id, u.nickname AS name, u.avatar, y.rank, y.join_at\n                FROM insert_cte AS y\n                INNER JOIN users AS u ON y.member_id = u.id\n            "
  }
}